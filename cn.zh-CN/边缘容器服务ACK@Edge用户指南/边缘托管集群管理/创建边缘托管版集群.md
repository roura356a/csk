---
keyword: [Kubernetes托管版集群, 创建边缘托管版集群]
---

# 创建边缘托管版集群

边缘托管集群服务从云到端将云计算的能力下沉到边缘侧、终端设备侧，并通过容器服务控制台进行统一交付、运维、管控，通过粘合云计算核心能力和边缘算力，是构筑在边缘基础设施之上的云计算平台。您可以通过容器服务控制台非常方便地创建Kubernetes边缘托管版集群。

您需要开通容器服务、弹性伸缩（ESS）服务和访问控制（RAM）服务。

登录[容器服务管理控制台](https://cs.console.aliyun.com/)、[RAM管理控制台](https://ram.console.aliyun.com/)和[弹性伸缩控制台](https://essnew.console.aliyun.com)开通相应的服务。

**说明：**

-   用户账户需有100元的余额并通过实名认证，否则无法创建按量付费的ECS实例和负载均衡。
-   随集群一同创建的负载均衡实例只支持按量付费的方式。
-   Kubernetes集群仅支持专有网络VPC。
-   每个账号默认可以创建的云资源有一定的配额，如果超过配额创建集群会失败。请在创建集群前确认您的配额。如果您需要提高您的配额，请提交工单申请。
    -   每个账号默认最多可以创建100个安全组。
    -   每个账号默认最多可以创建60个按量付费的负载均衡实例。
    -   每个账号默认最多可以创建20个EIP。

随着互联网智能终端设备数量的急剧增加以及数据和业务下沉的诉求增多，边缘计算规模和业务复杂度已经发生了翻天覆地的变化，边缘智能、边缘实时计算、边缘分析等新型业务不断涌现。传统云计算中心集中存储、计算的模式已经无法满足边缘设备对于时效、容量、算力的需求。边缘托管版是针对边缘计算场景推出的云边一体化协同托管方案。该类型托管集群在“云端提供一个标准、安全、高可用的Kubernetes集群，整合阿里云虚拟化、存储、网络和安全等能力，并简化集群运维工作，让您专注于容器化的应用的开发与管理。同时，在边缘端支持各种异构边缘计算力快速接入（边缘设备被云端的管控中心接管），涵盖IoT网关设备、终端设备、CDN资源、自建IDC资源等，支持X86和ARM架构。目前边缘托管版集群已经广泛应用于边缘智能、智慧楼宇、智慧工厂、音视频直播、在线教育、CDN等领域。

1.  登录[容器服务管理控制台](https://cs.console.aliyun.com)。

2.  在控制台左侧导航栏中，单击**集群**。

3.  在集群列表页面中，单击页面右上角的**创建集群**。

4.  单击**ACK边缘托管版**页签，然后完成集群配置。

    基础选项配置

    |配置项|描述|
    |---|--|
    |**集群名称**|填写集群的名称。

**说明：** 集群名称应包含1~63个字符，可包含数字、汉字、英文字符或短划线（-）。 |
    |**集群规格**|选择集群规格，支持**标准版**和**Pro版**。

选中**标准版**创建ACK@Edge集群。 |
    |**地域**|选择集群所在的地域。 |
    |**资源组**|将鼠标悬浮于页面上方的**账号全部资源**，选择资源组。在控制台页面顶部选择的资源组可过滤出该资源组内的专有网络及对应的虚拟交换机。在创建集群时，只显示过滤的专有网络实例及专有网络对应的虚拟交换机实例。

![资源组](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0706659951/p127165.png) |
    |**Kubernetes版本**|显示当前支持的Kubernetes版本。|
    |**专有网络**|设置集群的网络，您可以选择普通VPC和共享VPC。

    -   共享VPC：VPC的所有者账号（资源所有者）可以将其账号下的VPC内的交换机资源共享给其组织内的其他账号使用。
    -   普通VPC：不具备共享功能的VPC。
**说明：** Kubernetes集群仅支持专有网络。您可以在已有VPC列表中选择所需的VPC。如果没有您需要的专有网络，可以通过单击**创建专有网络**进行创建，请参见[使用专有网络](/cn.zh-CN/专有网络和交换机/使用专有网络.md)。 |
    |**虚拟交换机**|设置虚拟交换机。

您可以在已有虚拟交换机列表中，根据**可用区**选择1~3个交换机。如果没有您需要的交换机，可以通过单击**创建虚拟交换机**进行创建，请参见[使用交换机](/cn.zh-CN/专有网络和交换机/使用交换机.md)。 |
    |**节点IP数量**|如果您选择的网络模式为**Flannel**，您需设置**节点IP数量**。

**说明：**

    -   **节点IP数量**是指可分配给一个节点的IP数量，建议保持默认值。
    -   根据您所选择的专有网络和节点IP数量，ACK将为您推荐可用的Pod网络CIDR和Service CIDR，并给出相应配置下集群内可允许部署的主机数量以及每台主机可容纳的Pod数量。请您根据集群规模的实际需求，在推荐配置的基础上进行修改。 |
    |**Pod网络CIDR**|网络插件选择**Flannel**时，需要配置**Pod网络CIDR**。

**Pod网络CIDR**和**Service CIDR**两者都不能与VPC及VPC内已有Kubernetes集群使用的网段重复，创建成功后不能修改。且Service地址段也不能和Pod地址段重复，有关Kubernetes网络地址段规划的信息，请参见[Kubernetes集群网络规划](/cn.zh-CN/Kubernetes集群用户指南/网络/Kubernetes集群网络规划.md)。 |
    |**Service CIDR**|
    |**配置SNAT**|创建集群时，默认不开通公网。如果您选择的VPC不具备公网访问能力，选中**为专有网络配置SNAT**后，ACK将为您创建NAT网关并自动配置SNAT规则。 |
    |**API Server访问**|ACK默认为API Server创建一个内网SLB实例，您可修改SLB实例规格。更多信息，请参见[实例规格](/cn.zh-CN/传统型负载均衡CLB/CLB用户指南/实例/实例概述.md)。

**说明：** 删除默认创建的SLB实例将会导致无法访问API Server。

您可设置是否开放**使用EIP暴露API Server**。API Server提供了各类资源对象（Pod，Service等）的增删改查及Watch等HTTP Rest接口。

    -   如果选择开放，ACK会创建一个EIP，并挂载到公网SLB上。此时，Master节点的6443端口（对应API Server）暴露出来，您可以在外网通过kubeconfig连接并操作集群。
    -   如果选择不开放，则不会创建EIP，您只能在VPC内部用kubeconfig连接并操作集群。
**说明：** 通常边缘节点需要通过公网和云端API server交互，因此若不勾选**使用EIP暴露API Server**，边缘节点将无法连接到云端集群，所创建集群也将无法在边缘场景下使用。 |
    |**RDS白名单**|设置RDS白名单。将节点IP添加到RDS实例的白名单中。

**说明：** 允许白名单RDS访问Kubernetes集群，RDS必须在当前集群的VPC内。 |
    |**安全组**|支持选择**自动创建普通安全组**、**自动创建企业级安全组**、**选择已有安全组**。有关安全组的详细内容，请参见[安全组概述](/cn.zh-CN/安全/安全组/安全组概述.md)。

**说明：** 只有白名单用户可以使用**选择已有安全组**功能。请[提交工单](https://selfservice.console.aliyun.com/ticket/createIndex)申请。 |
    |**集群删除保护**|设置是否启用集群删除保护。为防止通过控制台或API误释放集群。 |
    |**资源组**|创建的集群将归属于选择的资源组。一个资源只能归属于一个资源组。根据不同的业务场景，您可以将资源组映射为项目、应用或组织等概念。更多信息，请参见[资源组](/cn.zh-CN/标签与资源/资源/资源组.md)。 |

    高级选项配置

    |配置项|描述|
    |---|--|
    |**kube-proxy代理模式**|支持iptables和IPVS两种模式。

    -   iptables：成熟稳定的kube-proxy代理模式，Kubernetes service的服务发现和负载均衡使用iptables规则配置，但性能一般，受规模影响较大，适用于集群存在少量的Service。
    -   IPVS：高性能的kube-proxy代理模式，Kubernetes service的服务发现和负载均衡使用Linux ipvs模块进行配置，适用于集群存在大量的service，对负载均衡有高性能要求的场景。 |
    |**标签**|为集群绑定标签。输入键和对应的值，单击**添加**。

**说明：**

    -   键是必需的，而值是可选的，可以不填写。
    -   键不能是aliyun、http://、https://开头的字符串，不区分大小写，最多64个字符。
    -   值不能是http:// 或https://，可以为空，不区分大小写，最多128个字符。
    -   同一个资源，标签键不能重复，相同标签键（Key）的标签会被覆盖。
    -   如果一个资源已经绑定了20个标签，已有标签和新建标签会失效，您需要解绑部分标签后才能再绑定新的标签。 |

5.  单击**下一步：Worker配置**，完成Worker节点配置。

    **说明：** 在Kubernetes边缘托管集群中，至少需要配置1个Worker节点，用于部署云端的管控组件。

    |配置项|描述|
    |---|--|
    |**实例规格**|支持选择多个实例规格。详情请参见[实例规格族](/cn.zh-CN/实例/实例规格族.md)。

**说明：** 边缘托管集群的日志、监控、反向通道等一些增强特性需要在云端部署组件，因此默认创建至少一个ECS实例作为Worker节点。 |
    |**已选规格**|呈现选中的规格。 |
    |**数量**|新增Worker实例（ECS实例）的数量。 |
    |**系统盘**|配置Worker节点系统盘。支持高效云盘、SSD云盘。|
    |**挂载数据盘**|支持**ESSD云盘**、**SSD云盘**和**高效云盘**。

**说明：**

    -   支持选中**开启云盘备份**以备份云盘数据。
    -   **ESSD云盘**支持自定义**性能级别**。

ESSD云盘容量越大，可供选择的性能级别越高（460 GiB容量以上可选PL2，1260 GiB以上可选PL3）。更多信息，请参见[容量范围与性能级别的关系](/cn.zh-CN/块存储/块存储介绍/ESSD云盘.md)。 |
    |**登录方式**|**说明：** 当您勾选**云监控插件**或**日志服务**时，需要给ECS设置登录方式。 |
    |**密钥对**|

6.  单击**下一步：组件配置**，完成组件配置。

    |配置项|描述|
    |---|--|
    |**云监控插件**|设置是否启用云监控插件。您可以选中**在ECS节点上安装云监控插件**，从而在云监控控制台查看所创建ECS实例的监控信息。|
    |**日志服务**|设置是否启用日志服务，您可使用已有Project或新建一个Project。默认选中**使用日志服务**。创建应用时，您可通过简单配置，快速使用日志服务，详情参见[通过日志服务采集Kubernetes容器日志](/cn.zh-CN/Kubernetes集群用户指南/可观测性/日志管理/通过日志服务采集Kubernetes容器日志.md)。 |
    |**工作流引擎**|设置是否使用AGS。

**说明：** 当前只有白名单用户可以使用该功能。

    -   如果选中AGS，则创建集群时系统自动安装AGS工作流插件。
    -   如果不选中，则需要手动安装AGS工作流插件，请参见[AGS命令行帮助](/cn.zh-CN/基因计算服务AGS用户指南/AGS工作流/AGS命令行帮助.md)。 |

7.  单击**下一步：确认配置**。

8.  选择服务协议并单击**创建集群**。

    **说明：** 一个Kubernetes边缘托管版集群的创建时间一般约为十分钟。


集群创建成功后，您可以在容器服务管理控制台的集群列表页面查看所创建的集群。

![集群列表](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/2425449951/p51372.png)

您可以单击操作列的**查看日志**，进入集群日志信息页面查看集群的日志信息。您也可以在集群日志信息页面中，单击**资源栈事件**查看更详细的信息。

![集群信息](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/2425449951/p51373.png)

在集群列表页面中，找到刚创建的集群，单击集群名称或者**操作**列下的**详情**，单击**基本信息**和**连接信息**页签，查看集群的基本信息和连接信息。

![基本信息](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/2425449951/p135588.png)

其中：

-   **API Server公网连接端点**：Kubernetes的API Server对公网提供服务的地址和端口，可以通过此服务在用户终端使用kubectl等工具管理集群。
-   **API Service内网连接端点**：Kubernetes的API server对集群内部提供服务的地址和端口，此IP为负载均衡的地址。
-   **测试域名**：为集群中的服务提供测试用的访问域名。服务访问域名后缀是`<cluster_id>.<region_id>.alicontainer.com`

    **说明：** 单击**重新绑定域名**，您可以重新绑定访问域名。


您可以[t16645.md\#](/cn.zh-CN/Kubernetes集群用户指南/集群/连接集群/通过kubectl管理Kubernetes集群.md)，执行`kubectl get node`查看集群的节点信息。

![查看结果](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/2425449951/p51375.png)

**相关文档**  


[边缘托管集群概述](t1884276.md#)

[升级边缘集群](/cn.zh-CN/边缘容器服务ACK@Edge用户指南/边缘托管集群管理/升级边缘集群.md)

[添加边缘节点](/cn.zh-CN/边缘容器服务ACK@Edge用户指南/边缘节点管理/添加边缘节点.md)

