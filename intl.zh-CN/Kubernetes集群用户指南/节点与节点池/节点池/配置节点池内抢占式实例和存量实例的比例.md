---
keyword: [抢占式实例, 存量实例, 规划比例]
---

# 配置节点池内抢占式实例和存量实例的比例

通过在节点池内配置抢占式实例和存量实例的比例，在保证节点池内有稳定的存量实例的前提下，规划抢占式实例比例可降低成本。本文介绍如何基于容器服务Kubernetes版（ACK）集群中的节点池功能按规划配置抢占式实例和存量实例的比例。

已创建Kubernetes集群，且集群版本大于1.9。具体操作，请参见[创建Kubernetes托管版集群](/intl.zh-CN/Kubernetes集群用户指南/集群/创建集群/创建Kubernetes托管版集群.md)。

**说明：**

-   请确保您的集群可添加足够的节点数。如果您需要添加更多节点，请[提交工单](https://workorder-intl.console.aliyun.com/console.htm)申请扩大配额。关于ACK集群的配额限制，请参见[使用限制](/intl.zh-CN/产品简介/使用限制.md)。
-   添加已有云服务器时，请确保您的专有网络中的ECS实例绑定一个弹性公网IP（EIP），或者相应VPC已经配置了NAT网关。您需要确保相应节点能正常访问公网，否则，添加云服务器会失败。

1.  登录[容器服务管理控制台](https://cs.console.aliyun.com)。

2.  在控制台左侧导航栏中，单击**集群**。

3.  在集群列表页面中，单击目标集群名称或者目标集群右侧**操作**列下的**详情**。

4.  在集群管理页左侧导航栏中，选择**节点管理** \> **节点池**。

5.  选择目标节点池或创建节点池。

    -   在目标节点池右侧**操作**列下单击**编辑**。
    -   在节点池页面右上角，单击**创建节点池**。具体操作，请参见[管理节点池](/intl.zh-CN/Kubernetes集群用户指南/节点与节点池/节点池/管理节点池.md)。
6.  在**创建节点池**或**编辑节点池**对话框中，选择**虚拟交换机**为多个虚拟交换机，选择**付费类型**为**抢占式实例**。

7.  单击**显示高级选项**，在**多可用区扩缩容策略**选择**成本优化策略**，并根据规划设置**按量实例所占比例（%）**和**允许按量实例补偿**。

    参数说明如下所示：

    |参数|描述|默认值|
    |--|--|---|
    |多可用区扩缩容策略|    -   优先级策略：选择配置顺序靠前的实例类型优先创建。
    -   成本优化策略：选择成本最低的实例类型优先创建。
    -   均衡分布策略：选择能达到可用区均衡分布的实例类型优先创建。
|均衡分布策略|
    |按量实例所占比例（%）|创建的实例中按量实例所占比例，计算时不包括组内最小按量实例数对应的按量实例。|20|
    |允许按量实例补偿|如果因价格、库存等原因无法创建足够的抢占式实例，开启此开关表示允许自动尝试创建按量实例满足ECS实例数量要求。|开启|

    **说明：**

    单击**确认配置**后：

    -   不支持修改**多可用区扩缩容策略**的选择项。
    -   若**多可用区扩缩容策略**选择为**成本优化策略**，可以修改**按量实例所占比例（%）**和**允许按量实例补偿**的配置。
8.  单击**确认配置**。


配置完成后，在节点池页面找到目标节点池，单击**操作**列中的**详情**，可查看**节点配置**列表中的**按量实例所占比例**。

